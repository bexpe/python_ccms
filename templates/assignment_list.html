{% extends "layout.html" %}
{% block content %}
<table>
    <caption>Assignments
    {% if user['type'] == 'Mentor' %}
    <button type="button" class="buttons" name="add_assignment" onclick="location.href='{{ url_for('add_new_assignment') }}'">Add assignment</button> 
    {% endif %}
    </caption>
    <thead>
    <tr>
        <th data-field="id" class="id_column">#</th>
        <th data-field="name">Task name</th>
        <th data-field="type">Type</th>
        {% if user['type'] == 'Student' %}
        <th data-field="grade">Grade</th>
        {% endif %}
    </tr>
    </thead>

    <tbody>
    {% for assignment in assignments_list %}
    <tr>
        <td class="id_column">{{assignment.id}}</td>
        <td>{{assignment.name}}</td>
        <td>
            {{assignment.task_type}}
        </td>
        {% if user['type'] == 'Student' %}
        <td>
            {% if assignment.task_type == "Personal" %}
              {{assignment.get_student_answer(student.user_id).grade}}
            {% else %}
              {{assignment.get_team_answer(student.team_id).grade}}
            {% endif %}
        </td>
        {% endif %}
        <td>
            <span class="buttons">
                {% if user['type'] == 'Mentor' %}
                <button type="button" onclick="location.href='{{ url_for('grade_assignment', assignment_id=assignment.id) }}'">Grade</button>
                {% endif %}
                {% if user['type'] == 'Student' %}
                <button type="button" onclick="location.href='{{ url_for('submit_assignment', assignment_id=assignment.id) }}'">Submit</button>
                {% endif %} 
            </span>
        </td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}